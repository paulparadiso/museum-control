(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var a,r,o,l,i,c,m=n(0),u=n.n(m),s=n(25),T=n.n(s),f=(n(94),n(96),Object(m.createContext)("")),d=n(168),g=n(38),b=n(162),E=(Object(b.a)(a||(a=Object(g.a)(["\n    query GetTimes {\n        times {\n            onTime\n            offTime\n        }\n    }\n    "]))),Object(b.a)(r||(r=Object(g.a)(["\n    mutation SetTimes($onTime: String, $offTime: String) {\n        setTimes(onTime: $onTime, offTime: $offTime) {\n            onTime\n            offTime\n        }\n    }\n    "]))),Object(b.a)(o||(o=Object(g.a)(["\n    query GetDeviceStatuses {\n        getDeviceStatuses {\n            name\n            status\n        }\n    }\n    "]))),Object(b.a)(l||(l=Object(g.a)(["\n    mutation SendMQTTMessage ($topic: String!, $message: String!) {\n        sendMQTTMessage(topic: $topic, message: $message) \n    }\n"])))),p=Object(b.a)(i||(i=Object(g.a)(["\n    query GetMQTTMessage ($topic: String!) {\n\t    getMQTTMessage(topic: $topic) \n    }\t\n    "]))),O=Object(b.a)(c||(c=Object(g.a)(["\n    query GetCurrentUser {\n        getCurrentUser\n    }\n"]))),S=n(167),h=n(148),_=n(141),M=n(15),v=n(147),w=n(144),j=Object(_.a)({root:{maxWidth:325,margin:10,textAlign:"center"},buttonContainer:{width:"57vw",textAlign:"right"},left:{width:"45%",float:"left"},buttons:{margin:10},right:{width:"45%",float:"right"}}),C=function(e){var t=j(),n=Object(w.a)(E),a=Object(M.a)(n,1)[0];return u.a.createElement(u.a.Fragment,null,e.label,e.items.map(function(n,r){return u.a.createElement(v.a,{variant:"contained",color:"primary",key:"button-".concat(r),className:t.buttons,onClick:function(){return t=n,void a({variables:{topic:e.topic,message:t}});var t}},n.toUpperCase())}))},Q=n(40),U=n.n(Q),A=Object(_.a)({root:{maxWidth:325,marginTop:10,textAlign:"center",float:"left"}}),W=function(e){var t=A();return function(e){var t=Object(m.useContext)(f);return!(e!==[]&&null!==e&&"all"!==t&&!e.includes(t))}(e.permissions)?u.a.createElement(U.a,null,u.a.createElement(S.a,{variant:"outlined",className:t.root},u.a.createElement(h.a,null,u.a.createElement(C,{label:e.label,items:e.items,topic:e.topic})))):u.a.createElement(u.a.Fragment,null)},x=n(34),y=function(e){return u.a.createElement(W,{label:"Show On/Off",items:["on","off"],topic:x.MUSEUM_SHOW_STATUS,permissions:["admin"]})},H=function(e){return u.a.createElement(W,{label:"Mute On/Off",items:["on","off"],topic:x.MUSEUM_SHOW_MUTE,permissions:["all"]})},I=n(37),P=n(150),N=n(151),k=n(103),F=n.n(k),D=Object(_.a)({root:{minWidth:700,marginTop:10,textAlign:"center",float:"left"},header:{width:"100%",marginBottom:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.0)"},buttons:{margin:10},icon:{margin:0},title:{fontSize:14,width:"50%"},console:{height:400,backgroundColor:"black",color:"green",overflow:"auto"},deviceIcon:{marginLeft:10},consoleLine:{margin:0,paddingTop:0,paddingBottom:0},pos:{marginBottom:23}}),R=function(e){var t,n=D(),a=Object(m.useState)([]),r=Object(M.a)(a,2),o=r[0],l=r[1],i=Object(d.a)(p,{variables:{topic:x.MQTT_SHOW_DEVICES_STATUS},pollInterval:500,onCompleted:function(){return c()}}).data,c=function(){for(var e=JSON.parse(i.getMQTTMessage),t=0;t<o.length;t++)if(o[t].name===e.name)return o[t].status=e.status,void l(Object(I.a)(o));l([].concat(Object(I.a)(o),[JSON.parse(i.getMQTTMessage)]))};return t=o.map(function(e,t){if(null===e)return[];var a="true"===e.status?"green":"red";return u.a.createElement(P.a,null,e.name,u.a.createElement(F.a,{className:n.deviceIcon,style:{color:a}}))}),u.a.createElement(U.a,null,u.a.createElement(S.a,{variant:"outlined",className:n.root},u.a.createElement(h.a,null,u.a.createElement(N.a,null,t))))},$=n(152),L=n(170),B=n(165),q=n(153),J=n(171),G=n(166),z=n(154),V=Object(_.a)({root:{maxWidth:325,margin:"auto",marginTop:10,textAlign:"center"},header:{width:"100%",marginBottom:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.0)"},buttons:{margin:10},icon:{margin:0},title:{fontSize:14,width:"50%"},console:{height:400,backgroundColor:"black",color:"green",overflow:"auto"},consoleLine:{margin:0,paddingTop:0,paddingBottom:0},pos:{marginBottom:23}}),K=function(e){var t=V(),n=null,a=null,r=Object(m.useState)({}),o=Object(M.a)(r,2),l=o[0],i=o[1],c=Object(d.a)(p,{variables:{topic:"museum/apps/dailyscheduler/params/current"},pollInterval:1e3,onCompleted:function(e){i(JSON.parse(e.getMQTTMessage))}}),s=c.loading,T=(c.error,c.data,Object(w.a)(E)),f=Object(M.a)(T,1)[0];return s?u.a.createElement(u.a.Fragment,null):u.a.createElement(U.a,null,u.a.createElement(S.a,{variant:"outlined",className:t.root},u.a.createElement(h.a,null,u.a.createElement($.a,null,u.a.createElement(L.a,{control:u.a.createElement(B.a,{size:"small",checked:"true"===l.enabled,onChange:function(){"true"===l.enabled?l.enabled="false":l.enabled="true"}}),label:e.schedulerState?"Turn Scheduler Off":"Turn Scheduler On"})),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f({variables:{onTime:null===n?l.onTime:n,offTime:null===a?l.offTime:a,enabled:l.enabled}})}},u.a.createElement(q.a,null,u.a.createElement(J.a,{htmlFor:"on"},l.onTime),u.a.createElement(G.a,{id:"on","aria-describedby":"on-text",onChange:function(e){return n=e.target.value}}),u.a.createElement(z.a,{id:"on-text"},"Change show on time.")),u.a.createElement("br",null),u.a.createElement(q.a,null,u.a.createElement(J.a,{htmlFor:"off"},l.offTime),u.a.createElement(G.a,{id:"off","aria-describedby":"off-text",onChange:function(e){return a=e.target.value}}),u.a.createElement(z.a,{id:"off-text"},"Change show off time.")),u.a.createElement("br",null),u.a.createElement(v.a,{className:t.buttons,variant:"contained",type:"submit"},"Submit")))))};var X=function(){var e=Object(d.a)(O),t=e.loading;return e.err,e.data,t?u.a.createElement(u.a.Fragment,null):u.a.createElement(f.Provider,{value:"admin"},u.a.createElement(y,null),u.a.createElement(H,null),u.a.createElement(R,null),u.a.createElement(K,null))},Y=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,159)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),o(e),l(e)})},Z=n(160),ee=n(163),te=n(158),ne=new Z.a({uri:"http://localhost:3001/graphql",cache:new ee.a});T.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(te.a,{client:ne},u.a.createElement(X,null))),document.getElementById("root")),Y()},34:function(e,t){e.exports={MQTT_SHOW_STATE_TOPIC:"museum/show/status",MQTT_SHOW_TOWER_STATE_TOPIC:"museum/show/tower/status",MQTT_SHOW_ROTUNDA_STATE_TOPIC:"museum/show/rotunda/status",MQTT_SHOW_FULLSCREEN_TOPIC:"museum/show/fullscreen",MQTT_SHOW_SCHEDULE_SET_TIME:"museum/show/scheduler/time/set",MQTT_SHOW_DEVICES_STATUS:"museum/show/devices/status",MQTT_SHOW_SCHEDULER_SET_STATE:"museum/show/scheduler/state",MQTT_SHOW_MUTE:"museum/show/security/mute",MQTT_SHOW_TOWER_MUTE:"museum/show/tower/audio/mute",MQTT_SHOW_ROTUNDA_MUTE:"museum/show/rotunda/audio/mute",MQTT_CUE_TOPIC:"museum/show/video/cue",MQTT_APP_PARAMS_SET:"museum/apps/<appname>/params/set",MQTT_APP_PARAMS_CURRENT:"museum/apps/<appname>/params/current"}},89:function(e,t,n){e.exports=n(118)},94:function(e,t,n){},96:function(e,t,n){}},[[89,3,2]]]);
//# sourceMappingURL=main.f022d384.chunk.js.map